(this["webpackJsonpreact-sweet-context-example"]=this["webpackJsonpreact-sweet-context-example"]||[]).push([[0],{11:function(t,e,n){"use strict";n.r(e);n(6);var r=n(0),c=n.n(r),a=n(3),o=n.n(a),u=n(1),i=n(4);function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function f(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,v(t,e)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function e(e,n){var r;return(r=t.call(this,e)||this).action=n(r.api),r}return f(e,t),s(e,[{key:"api",get:function(){var t=this;return{get:function(){return t.value},set:function(e){t.value=e instanceof Function?e(t.value):e},shallow:function(e){var n;n=e instanceof Function?e(t.value):e,Object.keys(n).find((function(e){return n[e]!==t.value[e]}))&&(t.value=Object.assign({},t.value,n))}}}}]),e}(function(t){function e(e){var n;return(n=t.call(this)||this)._value=e,n}return f(e,t),s(e,[{key:"value",get:function(){return this._value},set:function(t){this._value!==t&&(this._value=t,this.notify())}}]),e}(function(){function t(){this._listens=[]}var e=t.prototype;return e.addListen=function(t){var e=this;return this._listens.push(t),function(){e._listens.splice(e._listens.indexOf(t),1)}},e.notify=function(){this._listens.forEach((function(t){return t()}))},s(t,[{key:"hasListen",get:function(){return Boolean(this._listens.length)}}]),t}())),p=function(){function t(t){var e=t.state,n=t.action,c=t.name;this._createAction="function"===typeof n?n:function(t){var e={};return Object.keys(n).forEach((function(r){e[r]=n[r](t)})),e},this.Context=Object(r.createContext)(new h(e,this._createAction)),this.Context.displayName=c}var e=t.prototype;return e.createContainer=function(t){void 0===t&&(t={});var e=this.Context,n=this._createAction,c=function(t,e){return e&&e(t.api,t.action)};return function(a){var o=a.children,u=a.state,i=Object(r.useState)((function(){return new h(u,n)}))[0];return Object(r.useEffect)((function(){return c(i,t.create),function(){return c(i,t.dispose)}}),[i]),Object(r.useEffect)((function(){i.value!==u&&(i.value=u,c(i,t.update))}),[u,i]),Object(r.createElement)(e.Provider,{value:i,children:o})}},e.createSubscriber=function(){var t=this.Context;return function(e){var n=e.children,c=Object(r.useContext)(t);return n(c.value,c.action)}},e.createHook=function(t){var e=this.Context,n=t||function(t){return t};return function(){for(var t=arguments.length,c=new Array(t),a=0;a<t;a++)c[a]=arguments[a];var o=Object(r.useContext)(e),u=Object(r.useState)((function(){return n.apply(void 0,[o.value].concat(c))})),i=u[0],l=u[1];return Object(r.useEffect)((function(){return l(n.apply(void 0,[o.value].concat(c))),o.addListen((function(){return l(n.apply(void 0,[o.value].concat(c)))}))}),[o].concat(c)),[i,o.action]}},e.createHookAction=function(){var t=this;return function(){return Object(r.useContext)(t.Context).action}},t}(),b=new p({name:"ObjectStore",state:{a:0,b:0},action:function(t){var e=t.get,n=t.set,r=t.shallow;return{reset:function(){return n({a:0,b:0})},add:function(t){r(Object(i.a)({},t,e()[t]+1))}}}}).createHook((function(t,e){return t[e]})),d=new p({name:"Toggle",state:!1,action:function(t){var e=t.set;return function(t){return e((function(e){return null!==t&&void 0!==t?t:!e}))}}}),m=d.createHook(),y=(d.createHookAction(),d.createContainer({create:function(t,e){console.log(t.get()),console.log(e)}})),E=function(){var t=m(),e=Object(u.a)(t,2),n=e[0],r=e[1];return c.a.createElement("label",null,c.a.createElement("input",{type:"checkbox",checked:n,onChange:function(){return r()}}),"Toggle store")},g=function(t){var e=t.flag,n=b(e),r=Object(u.a)(n,2),a=r[0],o=r[1];return c.a.createElement("button",{type:"button",onClick:function(){return o.add(e)}},'Num "',e,'": ',a)},O=function(){return c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement(E,null),c.a.createElement(E,null)),c.a.createElement("div",null,c.a.createElement(y,{state:!0},c.a.createElement(E,null)),c.a.createElement(y,{state:!1},c.a.createElement(E,null))),c.a.createElement("div",null,c.a.createElement(g,{flag:"a"}),c.a.createElement(g,{flag:"b"})))};o.a.render(c.a.createElement(O,null),document.getElementById("root"))},5:function(t,e,n){t.exports=n(11)},6:function(t,e,n){}},[[5,1,2]]]);
//# sourceMappingURL=main.a57eb420.chunk.js.map