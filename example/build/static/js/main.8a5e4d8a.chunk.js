(this["webpackJsonpreact-context-state-example"]=this["webpackJsonpreact-context-state-example"]||[]).push([[0],{11:function(t,e,n){"use strict";n.r(e);n(6);var r=n(0),a=n.n(r),o=n(3),i=n.n(o),u=n(1);function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v=function(t){function e(e,n){var r;return(r=t.call(this,e)||this).action=n(r.api),r}return s(e,t),l(e,[{key:"api",get:function(){var t=this;return{get:function(){return t.value},set:function(e){t.value=e instanceof Function?e(t.value):e},shallow:function(e){var n;n=e instanceof Function?e(t.value):e,Object.keys(n).find((function(e){return n[e]!==t.value[e]}))&&(t.value=Object.assign({},t.value,n))}}}}]),e}(function(t){function e(e){var n;return(n=t.call(this)||this)._value=e,n}return s(e,t),l(e,[{key:"value",get:function(){return this._value},set:function(t){this._value!==t&&(this._value=t,this.notify())}}]),e}(function(){function t(){this._listens=[]}var e=t.prototype;return e.addListen=function(t){var e=this;return this._listens.push(t),function(){e._listens.splice(e._listens.indexOf(t),1)}},e.notify=function(){this._listens.forEach((function(t){return t()}))},l(t,[{key:"hasListen",get:function(){return Boolean(this._listens.length)}}]),t}())),h=function(){function t(t){var e=t.state,n=t.action,a=t.name;this._createAction="function"===typeof n?n:function(t){var e={};return Object.keys(n).forEach((function(r){e[r]=n[r](t)})),e},this.Context=Object(r.createContext)(new v(e,this._createAction)),this.Context.displayName=a}var e=t.prototype;return e.createContainer=function(t){var e;void 0===t&&(t={});var n=this.Context,a=this._createAction;return(e=function(e){function o(n){var r;return(r=e.call(this,n)||this).firePoint=function(t){t&&t(r.store.api,r.store.action)},r.store=new v(n.state,a),r.firePoint(t.create),r}s(o,e);var i=o.prototype;return i.shouldComponentUpdate=function(e){return e.state!==this.props.state&&(this.store.value=e.state,this.firePoint(t.update),!0)},i.componentWillUnmount=function(){this.firePoint(t.dispose)},i.render=function(){var t=this.props.children;return Object(r.createElement)(n.Provider,{value:this.store,children:t})},o}(r.Component)).displayName=n.displayName,e},e.createHook=function(t){var e=this.Context,n=t||function(t){return t};return function(t){var a=Object(r.useContext)(e),o=Object(r.useState)((function(){return n(a.value,t)})),i=o[0],u=o[1];return Object(r.useEffect)((function(){return u(n(a.value,t)),a.addListen((function(){return u(n(a.value,t))}))}),[a,t]),[i,a.action]}},e.createAction=function(){var t=this;return function(){return Object(r.useContext)(t.Context).action}},t}(),p=n(4),m=new h({state:{a:0,b:0},action:{reset:function(t){var e=t.shallow;return function(){e({a:0,b:0})}},add:function(t){var e=t.get,n=t.shallow;return function(t){n(Object(p.a)({},t,e()[t]+1))}}}}).createHook((function(t,e){return t[e]})),d=new h({name:"Toggle",state:!1,action:function(t){var e=t.set;return function(t){return e((function(e){return null!==t&&void 0!==t?t:!e}))}}}),b=d.createHook(),y=d.createContainer(),E=(d.createAction(),function(){var t=b(),e=Object(u.a)(t,2),n=e[0],r=e[1];return a.a.createElement("label",null,a.a.createElement("input",{type:"checkbox",checked:n,onChange:function(){return r()}}),"Toggle store")}),g=function(t){var e=t.flag,n=m(e),r=Object(u.a)(n,2),o=r[0],i=r[1];return a.a.createElement("button",{type:"button",onClick:function(){return i.add(e)}},'Num "',e,'": ',o)},O=function(){return a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement(E,null),a.a.createElement(E,null)),a.a.createElement("div",null,a.a.createElement(y,{state:!0},a.a.createElement(E,null)),a.a.createElement(y,{state:!1},a.a.createElement(E,null))),a.a.createElement("div",null,a.a.createElement(g,{flag:"a"}),a.a.createElement(g,{flag:"b"})))};i.a.render(a.a.createElement(O,null),document.getElementById("root"))},5:function(t,e,n){t.exports=n(11)},6:function(t,e,n){}},[[5,1,2]]]);
//# sourceMappingURL=main.8a5e4d8a.chunk.js.map